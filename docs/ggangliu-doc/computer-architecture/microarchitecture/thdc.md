# Pipeline THDC

## THDC

### 状态机

0: 初始状态，load阻塞后允许换出
1：由于load指令cache miss被换出，不能被换入
2：cache有该指令需要的数据，可以换入(该状态下的load指令不会重复计算)
3：阻塞式等待数据返回，不允许被换出
4：该线程所有指令已执行结束，但store指令的write ack还没返回

### 调度机制

1. 状态0/2都可以被换入
2. 状态1不会被取指，除非所有的warp都处于状态1
3. 状态1的warp被换入后，状态更新为状态2
4. 状态2的warp在指令执行的时候被更新为状态3
5. 状态3的warp不允许被换出
6. 状态4的warp不会再被调度换入
